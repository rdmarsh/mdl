= simple_form_for @device, :html => { :class => 'form-horizontal' } do |f|
  = f.error_notification
  = f.input :name, hint: "Device"
  = f.input :asset_tag
  = f.input :serial_number
  = f.association :service_level, include_blank: false, prompt: "Choose a service level", collection: ServiceLevel.order('name ASC'), priority: ["Unknown"]
  = f.association :support_level, include_blank: false, prompt: "Choose a support level", collection: SupportLevel.order('name ASC')
  = f.association :device_model, include_blank: false, prompt: "Choose a device model", collection: DeviceModel.order('name ASC')
  = f.association :environment, include_blank: false, prompt: "Choose an environment", collection: Environment.order('name ASC')
  = f.association :organisation, include_blank: false, prompt: "Choose an organisation", collection: Organisation.order('name ASC')
  = f.input :description, hint: "Description of the device"
  = f.simple_fields_for :network_interfaces do |network_interface|
    %p= "#{network_interface.object.name}"
    = network_interface.input :name
    = network_interface.input :ipaddress, placeholder: "0.0.0.0"
    = network_interface.association :network_use, include_blank: false, prompt: "Choose a network use", collection: NetworkUse.order('name ASC')
    = network_interface.input :description
    = network_interface.hidden_field :_destroy
    %li= link_to "Remove '#{network_interface.object.name}' from '#{f.object.name}'", "#", class: "remove_fields"
  = f.error :base
  = f.button :submit, :class => 'btn btn-primary'
  .btn-group.task_controller
    %a{:class => 'btn btn-danger dropdown-toggle', 'data-toggle' => 'dropdown', :href => '#'}
      Delete
      %span{:class => 'caret'}
    %ul.dropdown-menu
      %li= link_to "Delete '#{f.object.name}'?", @device, :confirm => 'Are you sure?', :method => :delete
  or
  = link_to "Cancel", :back